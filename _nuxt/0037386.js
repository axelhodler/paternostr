(window.webpackJsonp=window.webpackJsonp||[]).push([[9,2,3],{442:function(t,e,n){var content=n(445);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(93).default)("0552f9d3",content,!0,{sourceMap:!1})},443:function(t,e,n){"use strict";var r=n(11),o=n(149);r({target:"String",proto:!0,forced:n(150)("sub")},{sub:function(){return o(this,"sub","","")}})},444:function(t,e,n){"use strict";n(442)},445:function(t,e,n){var r=n(92)(!1);r.push([t.i,".link-to-event[data-v-ab084408]{color:#000;text-decoration:none!important}.picture[data-v-ab084408]{height:50px;width:50px;border-radius:25px;margin:0 15px 0 0}",""]),t.exports=r},446:function(t,e,n){"use strict";n.r(e);n(23),n(148),n(1),n(15),n(2);var r={name:"FeedEntry",props:["message"],data:function(){return{replyingTo:[]}},computed:{userMetadata:function(){var t=this;return this.$store.getters.getContactMetadata.find((function(e){return e.pubkey===t.message.author}))}},created:function(){this.$store.state.contactMetadata[this.message.author];this.replyingTo=this.message.tags.filter((function(t){return"p"===t[0]})).map((function(t){return t[1]}))}},o=(n(444),n(61)),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("NuxtLink",{staticClass:"link-to-event",attrs:{to:"/"+t.message.author+"/status/"+t.message.id}},[e("div",[e("div",{staticClass:"d-flex flex-row"},[t.userMetadata?e("div",[e("img",{staticClass:"picture",attrs:{src:t.userMetadata.picture}})]):e("div",[e("PuSkeleton",{staticClass:"picture",attrs:{width:"50px",height:"50px",circle:""}})],1),t._v(" "),e("div",{staticClass:"d-flex w-100 justify-content-between flex-column"},[e("div",{staticClass:"d-flex justify-content-between flex-row"},[e("NuxtLink",{attrs:{to:"/"+t.message.author}},[t.userMetadata?e("div",[e("p",{staticClass:"mb-0"},[t._v("\n                  "+t._s(t.userMetadata.name)+"\n                ")])]):e("div",[e("p",{staticClass:"mb-0"},[t._v(t._s(t._f("shortenAddress")(t.message.author)))])])]),t._v(" "),e("div",[e("small",[t._v(t._s(t._f("formatTimestamp")(t.message.created_at)))])])],1),t._v(" "),e("div",{staticClass:"d-flex w-100 justify-content-between flex-row"},[t.replyingTo.length>0?e("div",[e("small",[t._v("Replying to\n                "),t._l(t.replyingTo,(function(n){return e("span",[e("NuxtLink",{attrs:{to:"/"+n}},[t._v("\n                    "+t._s(t._f("shortenAddress")(n))+"\n                  ")])],1)}))],2)]):t._e()])])])]),t._v(" "),e("div",[e("p",{staticClass:"mt-1 mb-1"},[t._v("\n        "+t._s(t.message.content)+"\n      ")])])])],1)}),[],!1,null,"ab084408",null);e.default=component.exports},454:function(t,e,n){"use strict";n.r(e);n(94),n(148),n(1),n(443);var r={name:"Feed",props:["user"],data:function(){return{messages:[],loading:!0}},watch:{"$store.state.contacts":function(){this.messages=[],this.fetchFeed()}},computed:{sortedMessagesLatestFirst:function(){return this.messages.sort((function(a,b){return b.created_at-a.created_at}))}},methods:{fetchFeed:function(){var t=this,e=this.$store.getters.getPool;this.loading=!0;var n=this.$store.getters.getContacts;e.sub({cb:function(e){var n={id:e.id,content:e.content,author:e.pubkey,created_at:e.created_at,tags:e.tags};t.messages.find((function(t){return t.id===n.id}))||t.messages.push(n),t.loading=!1},filter:{kinds:[1],authors:n,limit:100}})}}},o=n(61),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("\n    Feed for "+t._s(t._f("shortenAddress")(t.user))+"\n  ")]),t._v(" "),t.loading?t._e():e("b-list-group",t._l(t.sortedMessagesLatestFirst,(function(t){return e("b-list-group-item",{key:t.id},[e("FeedEntry",{attrs:{message:t}})],1)})),1),t._v(" "),t.loading?e("b-list-group",[e("b-list-group-item",[e("PuSkeleton",{attrs:{width:"100",height:"120px"}})],1),t._v(" "),e("b-list-group-item",[e("PuSkeleton",{attrs:{width:"100",height:"120px"}})],1),t._v(" "),e("b-list-group-item",[e("PuSkeleton",{attrs:{width:"100",height:"120px"}})],1)],1):t._e()],1)}),[],!1,null,"3489b7ae",null);e.default=component.exports;installComponents(component,{FeedEntry:n(446).default})},459:function(t,e,n){"use strict";n.r(e);n(23),n(15),n(443);var r={name:"IndexPage",data:function(){return{followers:[],user:void 0}},watch:{"$store.state.activeUserPubkey":function(){this.initUser()}},created:function(){this.initUser()},methods:{initUser:function(){var t=this,e=this.$store.getters.getPool,n=function(e){var n=JSON.parse(e.content);t.$store.commit("addUserMetadata",{pubkey:e.pubkey,name:n.name,picture:n.picture})};this.user=this.$store.getters.getActiveUserPubkey,e.sub({cb:function(r){t.followers=r.tags.map((function(t){return t[1]})),t.$store.commit("setContacts",t.followers),e.sub({cb:n,filter:{kinds:[0],authors:t.followers}})},filter:{kinds:[3],authors:[this.user]}})}}},o=n(61),component=Object(o.a)(r,(function(){var t=this._self._c;return t("div",[t("Feed",{attrs:{user:this.user}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Feed:n(454).default})}}]);